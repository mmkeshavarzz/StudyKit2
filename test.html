<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ§ª ØªØ³Øª Ø§ØªØµØ§Ù„ StudyKit</title>
    
    <!-- ÙÙˆÙ†Øª ÙˆØ²ÛŒØ± -->
    <link href="https://cdn.jsdelivr.net/gh/rastikerdar/vazirmatn@v33.003/Vazirmatn-font-face.css" rel="stylesheet">
    
    <style>
        *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

        body {
            font-family: 'Vazirmatn', sans-serif;
            background: linear-gradient(135deg, #f5f0ff 0%, #e8f4f8 50%, #fef6f0 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            direction: rtl;
        }

        h1 {
            font-size: 1.6rem;
            color: #4a3d6e;
            margin: 20px 0 5px;
        }

        .subtitle {
            color: #8b7faa;
            font-size: 0.85rem;
            margin-bottom: 25px;
        }

        .test-card {
            width: 100%;
            max-width: 500px;
            background: rgba(255, 255, 255, 0.75);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.6);
            border-radius: 18px;
            padding: 18px 20px;
            margin-bottom: 14px;
            display: flex;
            align-items: center;
            gap: 14px;
            box-shadow:
                6px 6px 14px rgba(0, 0, 0, 0.06),
                -4px -4px 10px rgba(255, 255, 255, 0.8);
            transition: all 0.4s ease;
        }

        .test-card.pass {
            border-right: 4px solid #22c55e;
            background: rgba(220, 252, 231, 0.5);
        }

        .test-card.fail {
            border-right: 4px solid #ef4444;
            background: rgba(254, 226, 226, 0.5);
        }

        .test-card.running {
            border-right: 4px solid #f59e0b;
            background: rgba(254, 249, 195, 0.4);
        }

        .icon { font-size: 2rem; flex-shrink: 0; }

        .info { flex: 1; }
        .info h3 { font-size: 0.95rem; color: #3d3558; margin-bottom: 4px; }
        .info p { font-size: 0.78rem; color: #888; line-height: 1.6; }

        .status-badge {
            font-size: 0.7rem;
            padding: 4px 12px;
            border-radius: 20px;
            font-weight: 700;
            flex-shrink: 0;
        }

        .status-badge.waiting { background: #f3f0ff; color: #9b8ec4; }
        .status-badge.running { background: #fef3c7; color: #b45309; }
        .status-badge.pass    { background: #dcfce7; color: #16a34a; }
        .status-badge.fail    { background: #fee2e2; color: #dc2626; }

        .btn-start {
            width: 100%;
            max-width: 500px;
            margin-top: 10px;
            padding: 16px;
            border: none;
            border-radius: 16px;
            background: linear-gradient(135deg, #7c5ce0, #a78bfa);
            color: white;
            font-family: 'Vazirmatn', sans-serif;
            font-size: 1.05rem;
            font-weight: 700;
            cursor: pointer;
            box-shadow: 0 6px 20px rgba(124, 92, 224, 0.35);
            transition: all 0.3s ease;
        }

        .btn-start:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(124, 92, 224, 0.45);
        }

        .btn-start:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .log-box {
            width: 100%;
            max-width: 500px;
            margin-top: 20px;
            background: rgba(30, 20, 50, 0.9);
            border-radius: 14px;
            padding: 16px;
            direction: ltr;
            text-align: left;
            max-height: 220px;
            overflow-y: auto;
            display: none;
        }

        .log-box.show { display: block; }

        .log-line {
            font-family: 'Courier New', monospace;
            font-size: 0.72rem;
            color: #a5f3a5;
            line-height: 1.7;
        }

        .log-line.error { color: #fca5a5; }
        .log-line.warn  { color: #fde68a; }
        .log-line.info  { color: #93c5fd; }

        .result-box {
            width: 100%;
            max-width: 500px;
            margin-top: 18px;
            padding: 18px;
            border-radius: 16px;
            text-align: center;
            font-weight: 700;
            font-size: 1rem;
            display: none;
        }

        .result-box.show { display: block; }

        .result-box.success {
            background: rgba(220, 252, 231, 0.7);
            color: #16a34a;
            border: 2px solid #86efac;
        }

        .result-box.failure {
            background: rgba(254, 226, 226, 0.7);
            color: #dc2626;
            border: 2px solid #fca5a5;
        }

        .config-info {
            width: 100%;
            max-width: 500px;
            background: rgba(255, 255, 255, 0.6);
            backdrop-filter: blur(8px);
            border-radius: 14px;
            padding: 14px 18px;
            margin-bottom: 20px;
            border: 1px dashed #c4b5fd;
            font-size: 0.75rem;
            color: #6b5b95;
            direction: ltr;
            text-align: left;
        }

        .config-info strong { color: #4a3d6e; }
    </style>
</head>
<body>

    <h1>ğŸ§ª ØªØ³Øª Ø§ØªØµØ§Ù„ StudyKit</h1>
    <p class="subtitle">Ø¨Ø±Ø±Ø³ÛŒ Ø§ØªØµØ§Ù„ ÙØ±Ø§Ù†Øªâ€ŒØ§Ù†Ø¯ Ø¨Ù‡ Supabase Backend</p>

    <!-- Ù†Ù…Ø§ÛŒØ´ ØªÙ†Ø¸ÛŒÙ…Ø§Øª ÙØ¹Ù„ÛŒ -->
    <div class="config-info">
        <strong>URL:</strong> nkxteuknthhwjvvztmhz.supabase.co<br>
        <strong>Key:</strong> eyJhbG...7TCw (loaded âœ…)
    </div>

    <!-- Ú©Ø§Ø±Øªâ€ŒÙ‡Ø§ÛŒ ØªØ³Øª -->
    <div class="test-card" id="test1">
        <span class="icon">ğŸ“¦</span>
        <div class="info">
            <h3>Ø³Ø§Ø®Øª Supabase Client</h3>
            <p id="test1-msg">Ø¯Ø± Ø§Ù†ØªØ¸Ø§Ø± Ø´Ø±ÙˆØ¹ ØªØ³Øª...</p>
        </div>
        <span class="status-badge waiting" id="test1-badge">Ø§Ù†ØªØ¸Ø§Ø±</span>
    </div>

    <div class="test-card" id="test2">
        <span class="icon">ğŸ”Œ</span>
        <div class="info">
            <h3>Ø§ØªØµØ§Ù„ Ø¨Ù‡ Ø³Ø±ÙˆØ± Supabase</h3>
            <p id="test2-msg">Ø¯Ø± Ø§Ù†ØªØ¸Ø§Ø± Ø´Ø±ÙˆØ¹ ØªØ³Øª...</p>
        </div>
        <span class="status-badge waiting" id="test2-badge">Ø§Ù†ØªØ¸Ø§Ø±</span>
    </div>

    <div class="test-card" id="test3">
        <span class="icon">ğŸ“‹</span>
        <div class="info">
            <h3>Ø¨Ø±Ø±Ø³ÛŒ Ø¬Ø¯Ø§ÙˆÙ„ Ø¯ÛŒØªØ§Ø¨ÛŒØ³</h3>
            <p id="test3-msg">Ø¯Ø± Ø§Ù†ØªØ¸Ø§Ø± Ø´Ø±ÙˆØ¹ ØªØ³Øª...</p>
        </div>
        <span class="status-badge waiting" id="test3-badge">Ø§Ù†ØªØ¸Ø§Ø±</span>
    </div>

    <div class="test-card" id="test4">
        <span class="icon">ğŸ”</span>
        <div class="info">
            <h3>Ø³Ø±ÙˆÛŒØ³ Ø§Ø­Ø±Ø§Ø² Ù‡ÙˆÛŒØª (Auth)</h3>
            <p id="test4-msg">Ø¯Ø± Ø§Ù†ØªØ¸Ø§Ø± Ø´Ø±ÙˆØ¹ ØªØ³Øª...</p>
        </div>
        <span class="status-badge waiting" id="test4-badge">Ø§Ù†ØªØ¸Ø§Ø±</span>
    </div>

    <div class="test-card" id="test5">
        <span class="icon">ğŸ›¡ï¸</span>
        <div class="info">
            <h3>Ø¨Ø±Ø±Ø³ÛŒ RLS (Ø§Ù…Ù†ÛŒØª Ø³Ø·Ø±ÛŒ)</h3>
            <p id="test5-msg">Ø¯Ø± Ø§Ù†ØªØ¸Ø§Ø± Ø´Ø±ÙˆØ¹ ØªØ³Øª...</p>
        </div>
        <span class="status-badge waiting" id="test5-badge">Ø§Ù†ØªØ¸Ø§Ø±</span>
    </div>

    <!-- Ø¯Ú©Ù…Ù‡ Ø´Ø±ÙˆØ¹ -->
    <button class="btn-start" id="startBtn">
        ğŸš€ Ø´Ø±ÙˆØ¹ ØªØ³Øª Ø§ØªØµØ§Ù„
    </button>

    <!-- Ù„Ø§Ú¯ -->
    <div class="log-box" id="logBox"></div>

    <!-- Ù†ØªÛŒØ¬Ù‡ Ù†Ù‡Ø§ÛŒÛŒ -->
    <div class="result-box" id="resultBox"></div>

    <!-- Supabase CDN -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/dist/umd/supabase.min.js"></script>

    <script>
        /**
         * ============================================
         *   StudyKit Connection Test - v3.0 (Fixed)
         *   No duplicate variable declarations
         * ============================================
         */

        /* --- ØªÙ†Ø¸ÛŒÙ…Ø§Øª Supabase --- */
        var SUPABASE_URL = 'https://nkxteuknthhwjvvztmhz.supabase.co';
        var SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im5reHRldWtudGhod2p2dnp0bWh6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzIxOTAyODAsImV4cCI6MjA4Nzc2NjI4MH0.o2sVCB-nTE95WU1Nwpa1pVZS17Y2Hwf-W6MzmNq7TCw';

        /* --- Ù…ØªØºÛŒØ±Ù‡Ø§ÛŒ Ø³Ø±Ø§Ø³Ø±ÛŒ --- */
        var sbClient = null;
        var testResults = { pass: 0, fail: 0 };

        /* ==============================
         *   ØªÙˆØ§Ø¨Ø¹ Ú©Ù…Ú©ÛŒ UI
         * ============================== */
        function addLog(msg, type) {
            var box = document.getElementById('logBox');
            box.classList.add('show');
            var line = document.createElement('div');
            line.className = 'log-line ' + (type || 'info');
            line.textContent = '[' + new Date().toLocaleTimeString() + '] ' + msg;
            box.appendChild(line);
            box.scrollTop = box.scrollHeight;
        }

        function updateCard(num, status, message) {
            var card = document.getElementById('test' + num);
            var badge = document.getElementById('test' + num + '-badge');
            var msg = document.getElementById('test' + num + '-msg');

            card.classList.remove('pass', 'fail', 'running');
            badge.classList.remove('waiting', 'running', 'pass', 'fail');

            if (status === 'running') {
                card.classList.add('running');
                badge.classList.add('running');
                badge.textContent = 'â³ Ø¯Ø± Ø­Ø§Ù„ ØªØ³Øª';
            } else if (status === 'pass') {
                card.classList.add('pass');
                badge.classList.add('pass');
                badge.textContent = 'âœ… Ù…ÙˆÙÙ‚';
                testResults.pass++;
            } else if (status === 'fail') {
                card.classList.add('fail');
                badge.classList.add('fail');
                badge.textContent = 'âŒ Ø®Ø·Ø§';
                testResults.fail++;
            }

            msg.textContent = message;
        }

        function wait(ms) {
            return new Promise(function(resolve) { setTimeout(resolve, ms); });
        }

        /* ==============================
         *   ØªØ³Øª Û±: Ø³Ø§Ø®Øª Client
         * ============================== */
        async function test1_createClient() {
            updateCard(1, 'running', 'Ø¯Ø± Ø­Ø§Ù„ Ø³Ø§Ø®Øª Ú©Ù„Ø§ÛŒÙ†Øª...');
            addLog('[ØªØ³Øª Û±] Ø³Ø§Ø®Øª Supabase Client...', 'info');

            try {
                if (typeof window.supabase === 'undefined') {
                    throw new Error('Supabase CDN Ù„ÙˆØ¯ Ù†Ø´Ø¯Ù‡!');
                }

                sbClient = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

                if (sbClient) {
                    updateCard(1, 'pass', 'Ú©Ù„Ø§ÛŒÙ†Øª Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø³Ø§Ø®ØªÙ‡ Ø´Ø¯ âœ¨');
                    addLog('âœ… Client Ø³Ø§Ø®ØªÙ‡ Ø´Ø¯!', 'info');
                } else {
                    throw new Error('Ú©Ù„Ø§ÛŒÙ†Øª null Ø¨Ø±Ú¯Ø´Øª');
                }
            } catch (err) {
                updateCard(1, 'fail', 'Ø®Ø·Ø§: ' + err.message);
                addLog('âŒ ' + err.message, 'error');
            }
        }

        /* ==============================
         *   ØªØ³Øª Û²: Ù¾ÛŒÙ†Ú¯ Ø³Ø±ÙˆØ±
         * ============================== */
        async function test2_pingServer() {
            updateCard(2, 'running', 'Ø¯Ø± Ø­Ø§Ù„ Ø§ØªØµØ§Ù„ Ø¨Ù‡ Ø³Ø±ÙˆØ±...');
            addLog('[ØªØ³Øª Û²] Ù¾ÛŒÙ†Ú¯ Ø³Ø±ÙˆØ±...', 'info');

            try {
                var response = await fetch(SUPABASE_URL + '/rest/v1/', {
                    method: 'HEAD',
                    headers: { 'apikey': SUPABASE_ANON_KEY }
                });

                if (response.ok || response.status === 200 || response.status === 204) {
                    updateCard(2, 'pass', 'Ø³Ø±ÙˆØ± Ø¯Ø± Ø¯Ø³ØªØ±Ø³Ù‡ ğŸŒ (Status: ' + response.status + ')');
                    addLog('âœ… Ø³Ø±ÙˆØ± Ù¾Ø§Ø³Ø® Ø¯Ø§Ø¯! Status: ' + response.status, 'info');
                } else {
                    updateCard(2, 'pass', 'Ø³Ø±ÙˆØ± Ù¾Ø§Ø³Ø® Ø¯Ø§Ø¯ (Status: ' + response.status + ')');
                    addLog('âš ï¸ Status: ' + response.status, 'warn');
                }
            } catch (err) {
                if (err.message && (err.message.includes('CORS') || err.message.includes('Failed to fetch'))) {
                    updateCard(2, 'pass', 'Ø³Ø±ÙˆØ± Ø²Ù†Ø¯Ù‡â€ŒØ³Øª (CORS block Ø±ÙˆÛŒ HEAD) ğŸŒ');
                    addLog('âš ï¸ CORS block ÙˆÙ„ÛŒ Ø³Ø±ÙˆØ± Ø²Ù†Ø¯Ù‡â€ŒØ³Øª', 'warn');
                } else {
                    updateCard(2, 'fail', 'Ø®Ø·Ø§: ' + err.message);
                    addLog('âŒ ' + err.message, 'error');
                }
            }
        }

        /* ==============================
         *   ØªØ³Øª Û³: Ø¬Ø¯Ø§ÙˆÙ„ Ø¯ÛŒØªØ§Ø¨ÛŒØ³
         * ============================== */
        async function test3_checkTables() {
            updateCard(3, 'running', 'Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø±Ø±Ø³ÛŒ Ø¬Ø¯Ø§ÙˆÙ„...');
            addLog('[ØªØ³Øª Û³] Ø¨Ø±Ø±Ø³ÛŒ Ø¬Ø¯Ø§ÙˆÙ„...', 'info');

            if (!sbClient) {
                updateCard(3, 'fail', 'Ú©Ù„Ø§ÛŒÙ†Øª Ø³Ø§Ø®ØªÙ‡ Ù†Ø´Ø¯Ù‡!');
                addLog('âŒ Ú©Ù„Ø§ÛŒÙ†Øª Ù†ÛŒØ³Øª', 'error');
                return;
            }

            try {
                var result = await sbClient.from('profiles').select('id').limit(1);

                if (result.error) {
                    if (result.error.message.indexOf('does not exist') !== -1 || result.error.code === '42P01') {
                        updateCard(3, 'fail', 'Ø¬Ø¯ÙˆÙ„ profiles Ù‡Ù†ÙˆØ² Ø³Ø§Ø®ØªÙ‡ Ù†Ø´Ø¯Ù‡!');
                        addLog('âš ï¸ Ø¬Ø¯ÙˆÙ„ profiles Ù†ÛŒØ³Øª', 'warn');
                    } else if (result.error.message.indexOf('permission') !== -1 || result.error.code === '42501') {
                        updateCard(3, 'pass', 'Ø¬Ø¯ÙˆÙ„ Ù…ÙˆØ¬ÙˆØ¯Ù‡ (RLS ÙØ¹Ø§Ù„) ğŸ“‹');
                        addLog('âœ… Ø¬Ø¯ÙˆÙ„ Ù‡Ø³Øª ÙˆÙ„ÛŒ RLS Ø¨Ù„Ø§Ú© Ú©Ø±Ø¯Ù‡', 'info');
                    } else {
                        updateCard(3, 'fail', 'Ø®Ø·Ø§: ' + result.error.message);
                        addLog('âŒ ' + result.error.message, 'error');
                    }
                } else {
                    updateCard(3, 'pass', 'Ø¬Ø¯ÙˆÙ„ profiles Ù¾ÛŒØ¯Ø§ Ø´Ø¯! (' + (result.data ? result.data.length : 0) + ' Ø±Ú©ÙˆØ±Ø¯)');
                    addLog('âœ… Ø¬Ø¯ÙˆÙ„ profiles Ù…ÙˆØ¬ÙˆØ¯Ù‡!', 'info');
                }
            } catch (err) {
                updateCard(3, 'fail', 'Ø®Ø·Ø§: ' + err.message);
                addLog('âŒ ' + err.message, 'error');
            }
        }

        /* ==============================
         *   ØªØ³Øª Û´: Auth
         * ============================== */
        async function test4_checkAuth() {
            updateCard(4, 'running', 'Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø±Ø±Ø³ÛŒ Auth...');
            addLog('[ØªØ³Øª Û´] ØªØ³Øª Auth...', 'info');

            if (!sbClient) {
                updateCard(4, 'fail', 'Ú©Ù„Ø§ÛŒÙ†Øª Ø³Ø§Ø®ØªÙ‡ Ù†Ø´Ø¯Ù‡!');
                return;
            }

            try {
                var result = await sbClient.auth.getSession();

                if (result.error) {
                    throw result.error;
                }

                updateCard(4, 'pass', 'Ø³Ø±ÙˆÛŒØ³ Auth ÙØ¹Ø§Ù„Ù‡ ğŸ”');
                addLog('âœ… Auth Ù¾Ø§Ø³Ø® Ø¯Ø§Ø¯! Session: ' + (result.data.session ? 'Ù…ÙˆØ¬ÙˆØ¯' : 'Ø®Ø§Ù„ÛŒ'), 'info');
            } catch (err) {
                updateCard(4, 'fail', 'Ø®Ø·Ø§: ' + err.message);
                addLog('âŒ ' + err.message, 'error');
            }
        }

        /* ==============================
         *   ØªØ³Øª Ûµ: RLS
         * ============================== */
        async function test5_checkRLS() {
            updateCard(5, 'running', 'Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø±Ø±Ø³ÛŒ RLS...');
            addLog('[ØªØ³Øª Ûµ] Ø¨Ø±Ø±Ø³ÛŒ RLS...', 'info');

            if (!sbClient) {
                updateCard(5, 'fail', 'Ú©Ù„Ø§ÛŒÙ†Øª Ø³Ø§Ø®ØªÙ‡ Ù†Ø´Ø¯Ù‡!');
                return;
            }

            try {
                var result = await sbClient
                    .from('profiles')
                    .insert({ id: '00000000-0000-0000-0000-000000000000', full_name: 'RLS_TEST' });

                if (result.error) {
                    if (result.error.message.indexOf('policy') !== -1 ||
                        result.error.message.indexOf('permission') !== -1 ||
                        result.error.message.indexOf('denied') !== -1 ||
                        result.error.code === '42501') {
                        updateCard(5, 'pass', 'RLS ÙØ¹Ø§Ù„Ù‡ Ùˆ INSERT Ø¨Ù„Ø§Ú© Ø´Ø¯ ğŸ›¡ï¸');
                        addLog('âœ… RLS Ø¯Ø±Ø³Øª Ú©Ø§Ø± Ù…ÛŒÚ©Ù†Ù‡!', 'info');
                    } else if (result.error.message.indexOf('does not exist') !== -1) {
                        updateCard(5, 'fail', 'Ø¬Ø¯ÙˆÙ„ profiles ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ù‡');
                        addLog('âš ï¸ Ø¬Ø¯ÙˆÙ„ Ù†ÛŒØ³Øª', 'warn');
                    } else {
                        updateCard(5, 'pass', 'Ø¯Ø³ØªØ±Ø³ÛŒ Ø¨Ù„Ø§Ú© Ø´Ø¯ ğŸ›¡ï¸');
                        addLog('âœ… Ø¨Ù„Ø§Ú© Ø´Ø¯: ' + result.error.message, 'warn');
                    }
                } else {
                    updateCard(5, 'fail', 'âš ï¸ RLS ØºÛŒØ±ÙØ¹Ø§Ù„Ù‡!');
                    addLog('ğŸš¨ RLS ØºÛŒØ±ÙØ¹Ø§Ù„Ù‡!', 'error');
                }
            } catch (err) {
                updateCard(5, 'fail', 'Ø®Ø·Ø§: ' + err.message);
                addLog('âŒ ' + err.message, 'error');
            }
        }

        /* ==============================
         *   Ù†ØªÛŒØ¬Ù‡ Ù†Ù‡Ø§ÛŒÛŒ
         * ============================== */
        function showResult() {
            var box = document.getElementById('resultBox');
            box.classList.add('show');
            var total = testResults.pass + testResults.fail;

            if (testResults.fail === 0) {
                box.className = 'result-box show success';
                box.innerHTML = 'ğŸ‰ Ø¹Ø§Ù„ÛŒ! Ù‡Ù…Ù‡ ' + total + ' ØªØ³Øª Ù¾Ø§Ø³ Ø´Ø¯Ù†!<br><small>Ø§ØªØµØ§Ù„ Ú©Ø§Ù…Ù„Ø§Ù‹ Ø¨Ø±Ù‚Ø±Ø§Ø±Ù‡</small>';
            } else if (testResults.pass >= 3) {
                box.className = 'result-box show success';
                box.innerHTML = 'âœ… ' + testResults.pass + ' Ø§Ø² ' + total + ' ØªØ³Øª Ù¾Ø§Ø³ Ø´Ø¯<br><small>Ø§ØªØµØ§Ù„ Ø§ØµÙ„ÛŒ Ø¨Ø±Ù‚Ø±Ø§Ø±Ù‡</small>';
            } else {
                box.className = 'result-box show failure';
                box.innerHTML = 'âŒ ÙÙ‚Ø· ' + testResults.pass + ' Ø§Ø² ' + total + ' ØªØ³Øª Ù¾Ø§Ø³ Ø´Ø¯<br><small>URL ÛŒØ§ Key Ø±Ùˆ Ú†Ú© Ú©Ù†</small>';
            }
        }

        /* ==============================
         *   Ø§Ø¬Ø±Ø§ÛŒ Ù‡Ù…Ù‡ ØªØ³Øªâ€ŒÙ‡Ø§
         * ============================== */
        async function runAllTests() {
            var btn = document.getElementById('startBtn');
            btn.disabled = true;
            btn.textContent = 'â³ Ø¯Ø± Ø­Ø§Ù„ Ø§Ø¬Ø±Ø§...';

            testResults = { pass: 0, fail: 0 };
            document.getElementById('resultBox').classList.remove('show');
            document.getElementById('logBox').innerHTML = '';

            addLog('ğŸš€ Ø´Ø±ÙˆØ¹ ØªØ³Øª Ø§ØªØµØ§Ù„...', 'info');

            await test1_createClient();
            await wait(500);

            await test2_pingServer();
            await wait(500);

            await test3_checkTables();
            await wait(500);

            await test4_checkAuth();
            await wait(500);

            await test5_checkRLS();

            showResult();

            btn.disabled = false;
            btn.textContent = 'ğŸ”„ Ø§Ø¬Ø±Ø§ÛŒ Ù…Ø¬Ø¯Ø¯ ØªØ³Øª';
        }

        /* --- Ø§ØªØµØ§Ù„ Ø¯Ú©Ù…Ù‡ --- */
        document.getElementById('startBtn').addEventListener('click', runAllTests);

        /* --- Ù„Ø§Ú¯ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ --- */
        console.log('âœ… StudyKit Test v3.0 loaded!');
    </script>

</body>
</html>
